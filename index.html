<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regional Map Explorer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f4f1e6; /* Light parchment */
            min-height: 100vh;
            padding: 20px;
            color: #4F2009;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(79, 32, 9, 0.15);
            overflow: hidden;
            border: 1px solid #D6C69F;
        }
        
        .header {
            background: #4F2009;
            color: #D6C69F;
            padding: 30px;
            text-align: center;
        }
        
        .search-container {
            padding: 20px;
            background: #D6C69F;
            border-bottom: 2px solid #4F2009;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .search-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #4F2009;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .search-btn {
            padding: 12px 25px;
            background: #4F2009;
            color: #D6C69F;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: opacity 0.2s;
        }

        .search-btn:hover { opacity: 0.9; }
        
        .main-content { display: flex; height: 600px; }
        .map-container { flex: 1; border-right: 2px solid #D6C69F; }
        #map { width: 100%; height: 100%; }
        
        .info-panel {
            width: 450px;
            background: #fdfbf5;
            overflow-y: auto;
            padding: 25px;
        }
        
        .info-title {
            color: #4F2009;
            font-size: 1.8em;
            border-bottom: 3px solid #D6C69F;
            margin-bottom: 15px;
        }

        .region-stats {
            background: #D6C69F;
            color: #4F2009;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid rgba(79, 32, 9, 0.2);
            padding: 5px 0;
        }

        #langToggle {
            background: #4F2009;
            color: #D6C69F;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            float: right;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Regional Map Explorer</h1>
            <p>Historic Land Grant Boundaries</p>
        </div>
        
        <div class="search-container">
            <div class="search-box">
                <input type="text" id="addressInput" class="search-input" placeholder="Enter an address...">
                <button id="searchBtn" class="search-btn">Search</button>
            </div>
        </div>
        
        <div class="main-content">
            <div class="map-container"><div id="map"></div></div>
            <div class="info-panel">
                <button id="langToggle">ES</button>
                <div id="infoContent">Select a region to see details.</div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
        const PRECISION = 6;
        const regionData = {
            'Corte Madera de Novato': {
                // Coordinates snapped to shared borders with Soullajule
                coordinates: [[38.16825, -122.694077], [38.133962, -122.724976], [38.120459, -122.70163], [38.112356, -122.70163], [38.112085, -122.694077], [38.111275, -122.68824], [38.106683, -122.684807], [38.105602, -122.677597], [38.10263, -122.67382], [38.10263, -122.658714], [38.105872, -122.653564], [38.104792, -122.632278], [38.108033, -122.632278], [38.110465, -122.627129], [38.120999, -122.626785], [38.121539, -122.630219], [38.136123, -122.630219], [38.139093, -122.636055], [38.145574, -122.633652], [38.150164, -122.641891], [38.146924, -122.654594], [38.151243, -122.666267], [38.149624, -122.674507], [38.16825, -122.694077]],
                color: '#4F2009',
                info: {
                    title: { en: 'Corte Madera de Novato', es: 'Corte Madera de Novato' },
                    description: { en: 'Crucial timber resource for the Presidio.', es: 'Recurso maderero crucial para el Presidio.' },
                    stats: { en: { 'Grantee': 'John Reed' }, es: { 'Beneficiario': 'John Reed' } }
                }
            },
            'Soullajule': {
                // Starts exactly where Corte Madera ends
                coordinates: [[38.13407, -122.72525], [38.123403, -122.760441], [38.145547, -122.787907], [38.157696, -122.821037], [38.168898, -122.83992], [38.181097, -122.861275], [38.194806, -122.872261], [38.208835, -122.865051], [38.209105, -122.852348], [38.205058, -122.844109], [38.200202, -122.834496], [38.203979, -122.827972], [38.203979, -122.81424], [38.20236, -122.808403], [38.197504, -122.80291], [38.185631, -122.800163], [38.180774, -122.786087], [38.178884, -122.778191], [38.174566, -122.771324], [38.157021, -122.762054], [38.164579, -122.735275], [38.168628, -122.695107], [38.13407, -122.72525]],
                color: '#BFAF8A',
                info: {
                    title: { en: 'Soullajule', es: 'Soullajule' },
                    description: { en: 'Rugged coastal terrain.', es: 'Terreno costero escarpado.' },
                    stats: { en: { 'Grantee': 'Manuel Torrejon' }, es: { 'Beneficiario': 'Manuel TorrejÃ³n' } }
                }
            }
        };

        let map, currentLang = 'en';

        function initMap() {
            map = L.map('map').setView([38.15, -122.7], 11);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
            
            Object.keys(regionData).forEach(name => {
                const data = regionData[name];
                const poly = L.polygon(data.coordinates, {
                    color: '#4F2009',
                    fillColor: data.color,
                    fillOpacity: 0.3,
                    weight: 2
                }).addTo(map);
                
                poly.on('click', () => showInfo(name));
            });
        }

        function showInfo(name) {
            const region = regionData[name].info;
            const content = `
                <h2 class="info-title">${region.title[currentLang]}</h2>
                <p>${region.description[currentLang]}</
